<!DOCTYPE html>
<html>
<head>
<title>Fake facebook page take down project</title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</head>
<body>


<h1>Fake facebook posts</h1>
<div class="facebookfeed">Loading...</div>

</body>





<script>
function fbFetch(data) {

    var access_token = "503118756502625|AId-nVagWtV8IO5VxZsmD3NQWrw";
    //var url = "https://graph.facebook.com/?ids=516786135121936,1407110389588241&fields=posts.limit(3){message,created_time,picture}&access_token=" + access_token;
	var url = "https://graph.facebook.com/?ids="+data+"&fields=posts.limit(3){message,created_time,picture}&access_token=" + access_token;

    $.getJSON(url,function(response) {

        var messages = [];

        Object.getOwnPropertyNames(response).forEach(function(page, idx, array) {
            response[page].posts.data.forEach(function(post, idx, array) {
                messages.push(post);
            });
        });

        function compare(a,b) {
          if (a.created_time < b.created_time)
            return -1;
          if (a.created_time > b.created_time)
            return 1;
          return 0;
        }

         //Use jQuery getJSON method to fetch the data from the url and then create our unordered list with the relevant data.
        var html = "<ul>";
            //loop through and within data array's retrieve the message variable.
            $.each(messages.sort(compare), function(i,fb){
                if (typeof fb.picture != "undefined") {
                    html += "<li>" + fb.message + "</br>" + '<img SRC="' + fb.picture + '">' + "</br>" + fb.created_time + "</li></br>";
                }
                else{
                    html += "<li>" + fb.message + "</br>" + fb.created_time + "</li></br>";
                }
            });

        html += "</ul>";

        //A little animation once fetched
        $('.facebookfeed').animate({opacity:0}, 500, function(){
            $('.facebookfeed').html(html);
        });

        $('.facebookfeed').animate({opacity:1}, 500);

    });

}
       
var wordList = [];
$.get('embed.txt', function(data) {
   //do_something_with(data)
   wordList = data.split('=>');
   console.log(wordList);
   //fbFetch(data);
   
   
    //Use jQuery getJSON method to fetch the data from the url and then create our unordered list with the relevant data.
        var html = "<ul>";
            //loop through and within data array's retrieve the message variable.
            $.each(wordList, function(i,fb){
               // if (typeof fb.picture != "undefined") {
                 //   html += "<li>" + fb.message + "</br>" + '<img SRC="' + fb.picture + '">' + "</br>" + fb.created_time + "</li></br>";
               // }
               // else{
                    html += "<li>" + fb+ "</li></br>";
               // }
            });

        html += "</ul>";

        //A little animation once fetched
        $('.facebookfeed').animate({opacity:0}, 500, function(){
            $('.facebookfeed').html(html);
        });

        $('.facebookfeed').animate({opacity:1}, 500);
   
}, 'text');
           


</script>
</html>